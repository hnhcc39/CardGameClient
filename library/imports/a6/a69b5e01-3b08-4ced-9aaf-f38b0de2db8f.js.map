{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var ERROR_NOERROR = 0;\r\n\r\nvar LOGIN_ERROR_NOTFOUND = 1;\r\nvar LOGIN_ERROR_PASSWORD_ERROR = 2;\r\n\r\nvar ERROR_ENTERROOM_INROOM = 1;\r\nvar ERROR_DUELREADY_ISPLAYING = 1;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n    },\r\n    \r\n    statics: {\r\n        gameConn: null, //网络连接\r\n        duel: null,     //游戏管理\r\n        \r\n        //设置游戏管理\r\n        setDuel: function(duel) {\r\n            this.duel = duel;\r\n        },\r\n        \r\n        //初始化\r\n        init: function(conn) {\r\n            cc.log('EventProcess 初始化');\r\n            this.gameConn = conn;\r\n            window.WC_ENTERROOM_RESPONSE = 'WC_ENTERROOM_RESPONSE';\r\n\r\n            //注册消息处理函数\r\n            this.gameConn.registerHandler('disconnect', this.disconnect.bind(this));\r\n            this.gameConn.registerHandler(WC_CONNECTED, this[WC_CONNECTED].bind(this));\r\n            this.gameConn.registerHandler(WC_LOGIN_RESPONSE, this[WC_LOGIN_RESPONSE].bind(this));\r\n            this.gameConn.registerHandler(WC_ENTERROOM_RESPONSE, this[WC_ENTERROOM_RESPONSE].bind(this));\r\n            this.gameConn.registerHandler(WC_CHAT_ADD_RESPONSE, this[WC_CHAT_ADD_RESPONSE].bind(this));\r\n            this.gameConn.registerHandler(WC_CHAT_ADD, this[WC_CHAT_ADD].bind(this));\r\n            this.gameConn.registerHandler(WC_PLAYER_ADD, this[WC_PLAYER_ADD].bind(this));\r\n            this.gameConn.registerHandler(WC_PLAYER_UPDATE, this[WC_PLAYER_UPDATE].bind(this));\r\n            this.gameConn.registerHandler(WC_DUELREADY_RESPONSE, this[WC_DUELREADY_RESPONSE].bind(this));\r\n            this.gameConn.registerHandler(WC_DUELREADY, this[WC_DUELREADY].bind(this));\r\n             \r\n        },\r\n        \r\n        //服务器断开连接\r\n        disconnect: function() {\r\n            this.gameConn.disconnect();\r\n        },\r\n        \r\n        //连接响应\r\n        WC_CONNECTED: function(param) {\r\n            this.gameConn.connectSuccess(param.idx);\r\n            cc.log('收到服务器连接响应，clientid: %d, name: %s', param.idx, param.name);\r\n        },\r\n        \r\n        //登录响应\r\n        WC_LOGIN_RESPONSE: function(param) {\r\n            if(param.error == ERROR_NOERROR)\r\n            {\r\n                this.gameConn.loginSuccess(param.account);\r\n                cc.log(\"登录成功,error:%d\", param.error);\r\n                cc.director.loadScene('helloworld');    //切换到游戏场景\r\n            }\r\n            else if(param.error == LOGIN_ERROR_PASSWORD_ERROR)\r\n            {\r\n                showTipLabel('登录失败，密码错误');\r\n            }\r\n            else if(param.error == LOGIN_ERROR_NOTFOUND)\r\n            {\r\n                showTipLabel('登录失败，账号不存在');\r\n            }\r\n            else\r\n            {\r\n                showTipLabel('登录失败，未知错误');\r\n            }\r\n        },\r\n        \r\n        //进入房间响应\r\n        WC_ENTERROOM_RESPONSE: function(param) {\r\n            var error = param.error;\r\n            if(error == ERROR_ENTERROOM_INROOM)\r\n                cc.log('您已经进入房间，不可再次进入');\r\n            else if(error === ERROR_NOERROR)\r\n            {\r\n                cc.log('成功进入房间');\r\n            }\r\n        },\r\n        \r\n        //添加聊天信息响应(以后写)\r\n        WC_CHAT_ADD_RESPONSE: function(param) {\r\n        },\r\n        \r\n        //服务端发送聊天信息\r\n        WC_CHAT_ADD: function(param) {\r\n            if(param.isSystem)\r\n                this.duel.addChatItem(param.message, cc.Color.RED);\r\n            else\r\n                this.duel.addChatItem(param.message);\r\n        },\r\n        \r\n        //添加完整玩家数据\r\n        WC_PLAYER_ADD: function(param) {\r\n            duel.addPlayer(param);\r\n        },\r\n        \r\n        //Player更新\r\n        WC_PLAYER_UPDATE: function(param) {\r\n            var idx = param.idx;\r\n\r\n            var player = this.duel.getPlayer(idx);\r\n            if(!player)\r\n                return;\r\n            \r\n            player.unPackData(param);\r\n        },\r\n        \r\n         \r\n        //准备游戏响应\r\n        WC_DUELREADY_RESPONSE: function(param) {\r\n            var error = param.error;\r\n            if(error === ERROR_DUELREADY_ISPLAYING)\r\n            {\r\n                showTipLabel('游戏已经开始了，不能准备', cc.Color.RED);\r\n            }\r\n            else\r\n            {\r\n                //第0个玩家控件为玩家自己，设置为玩家IDX\r\n                var playerSprite = this.duel.getPlayerSprte(0);\r\n                playerSprite.setIdx(param.idx);\r\n            }\r\n        }, \r\n        \r\n        //有玩家准备游戏\r\n        WC_DUELREADY: function(param) {\r\n            var idx = param.idx;\r\n            \r\n            //玩家更新\r\n            var player = this.duel.getPlayer(idx);\r\n            if(!player)\r\n                return;\r\n            \r\n            player.unPackData(param);\r\n            \r\n            //玩家控件更新\r\n            //3种情况 \r\n            //1.玩家自己准备，0控件刷新为玩家；\r\n            //2.第一个准备的玩家，1控件刷新为此玩家；\r\n            //3.第二个准备的玩家，0控件刷新为此玩家；\r\n            var playerSprite = this.duel.getPlayerSprte(0);\r\n            var playerSprite1 = this.duel.getPlayerSprite(1);\r\n            if(playerSprite.getIdx() !== idx)\r\n            {\r\n                if(playerSprite1.getIdx() !== -1)\r\n                {\r\n                    playerSprite.setIdx(idx);\r\n                }\r\n                else\r\n                {\r\n                    playerSprite1.setIdx(idx);\r\n                }\r\n            }\r\n            \r\n            duel.refreshPlayerSprite(idx);\r\n        },\r\n    },\r\n    \r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}